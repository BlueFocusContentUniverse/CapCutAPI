# Example environment configuration for CapcutAPI Development

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_ENV=development

DATABASE_URL=postgresql://postgres@127.0.0.1/kox

# COS 对象存储
COS_SECRET_ID=${COS_SECRET_ID}
COS_SECRET_KEY=${COS_SECRET_KEY}
COS_REGION=${COS_REGION}
COS_BUCKET_NAME=${COS_BUCKET_NAME}
COS_ENDPOINT=${COS_ENDPOINT}
COS_CDN_DOMAIN=${COS_CDN_DOMAIN}
CDN_SIGN_KEY=${CDN_SIGN_KEY}

# Redis Token缓存配置（可选）
ENABLE_REDIS_CACHE=true

# Redis配置（可选）
# TOKEN_REDIS_URL: 用于Cognito token缓存（DB 1）
# RATE_LIMIT_REDIS_URL: 用于rate limit限流（DB 2，独立配置），如果未配置RATE_LIMIT_REDIS_URL，rate limit功能仍然可用但不使用Redis（不会真正限流）
# DRAFT_CACHE_REDIS_URL: 用于草稿缓存（DB 3，独立配置），如果未配置DRAFT_CACHE_REDIS_URL，草稿缓存将降级到PostgreSQL
TOKEN_REDIS_URL=redis://localhost:6379/1
RATE_LIMIT_REDIS_URL=redis://localhost:6379/2
DRAFT_CACHE_REDIS_URL=redis://localhost:6379/3
# 带密码示例：DRAFT_CACHE_REDIS_URL=redis://:password@localhost:6379/3

# AWS Cognito配置（M2M认证）
# 服务端必需配置（用于验证token）：
COGNITO_REGION=us-west-2
COGNITO_USER_POOL_ID=us-west-2_MHKocs7IE
COGNITO_CLIENT_ID=STK0Q1C81OEJLLRJ14DFCNNQ7

# 速率限制配置（可选）
# RATE_LIMIT_REQUESTS_PER_MINUTE: 每分钟允许的请求数，默认600
# RATE_LIMIT_KEY_PREFIX: Redis key前缀，默认"rate_limit:"
RATE_LIMIT_REQUESTS_PER_MINUTE=600
RATE_LIMIT_KEY_PREFIX=rate_limit:


# 以下配置仅用于测试脚本（可选）
# COGNITO_CLIENT_SECRET=your_client_secret_here
# COGNITO_SCOPE=default-m2m-resource-server-yde8kg/read

# Draft management API authentication
# Use one of the following:
# - DRAFT_API_TOKEN for a single token
# - DRAFT_API_TOKENS for a comma-separated list of tokens
# Fallbacks (also supported): API_TOKEN, AUTH_TOKEN
# Clients must send the token via Authorization: Bearer <token> or X-API-Token header
# DRAFT_API_TOKEN=changeme
# DRAFT_API_TOKENS=token1,token2

# API 文档配置 (development/local 开启文档, production/prod 关闭文档)
ENVIRONMENT=production
